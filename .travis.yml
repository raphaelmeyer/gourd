language: go

go:
  - 1.0
  - 1.1
  - 1.2

env:
  - RUN_CUCUMBER=true
  - RUN_CUCUMBER=false

matrix:
  include:
    - go: 1.0
      env: RUN_CUCUMBER=false
    - go: 1.1
      env: RUN_CUCUMBER=false
    - go: 1.2
      env: RUN_CUCUMBER=true

before_install:
  - [ $RUN_CUCUMBER = true ] && gem install cucumber

install:
  - go get -v ./...
  - go get -v github.com/stretchr/testify

after_success:
  - [ $RUN_CUCUMBER = true ] && go run features/steps.go & && sleep 1 && cucumber

notifications:
  email:
    on_success: change
    on_failure: always


